{"version":3,"sources":["src/templates.js","src/utils.js","src/JobSearch.js","src/app.js"],"names":["jobTemplate","job","currency","title","salary_max","location","display_name","description","redirect_url","extractFormData","form","Array","from","elements","reduce","acc","id","value","getCurrencySymbol","country","currencies","gb","us","au","ca","in","JobSearch","searchFormSelector","resultsContainerSelector","loadingElementSelector","searchForm","document","querySelector","resultsContainer","loadingElement","countryCode","setCurrencySymbol","fetch","then","results","json","toLowerCase","currencySymbol","addEventListener","event","preventDefault","startLoading","innerHTML","search","response","stopLoading","map","join","jobs","catch","classList","add","remove","jobSearch","setCountryCode","configureFormListener"],"mappings":"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","file":"app.a6a4d504.js","sourceRoot":"..","sourcesContent":["export const jobTemplate = (job, currency) => `\n<div class=\"card\">\n  <div class=\"card-body\">\n  <h4 class=\"card-title\">${job.title} up to ${currency}${job.salary_max}</h4>\n  <h5>${job.location.display_name}</h5>\n  <p class=\"card-text\">${job.description}</p>\n  <a href=\"${job.redirect_url}\">View Job</a>\n  </div>\n</div>\n`;","\nexport const extractFormData = form => Array\n.from(form.elements)\n.reduce((acc, { id, value }) => ({ [id]: value, ...acc }), {});\n\nexport const getCurrencySymbol = country => {\nconst currencies = {\n    gb: '£',\n    us: '$',\n    au: '$',\n    ca: '$',\n    in: '₹',\n};\nreturn currencies[country];\n}","import { jobTemplate } from './templates';\nimport { extractFormData, getCurrencySymbol } from './utils';\n\n\nexport class JobSearch {\n\n  constructor(searchFormSelector, resultsContainerSelector, loadingElementSelector) {\n    this.searchForm = document.querySelector(searchFormSelector);\n    this.resultsContainer = document.querySelector(resultsContainerSelector);\n    this.loadingElement = document.querySelector(loadingElementSelector);\n  }\n\n  setCountryCode() {\n    this.countryCode = 'in';\n    this.setCurrencySymbol();\n\n    fetch('http://ip-api.com/json')\n      .then(results => results.json())\n      .then(results => {\n        this.countryCode = results.countryCode.toLowerCase();\n        this.setCurrencySymbol();\n      });\n  }\n\n  setCurrencySymbol() {\n    this.currencySymbol = getCurrencySymbol(this.countryCode);\n  }\n\n  configureFormListener() {\n    this.searchForm.addEventListener('submit', (event) => {\n    event.preventDefault();\n    this.startLoading();\n    this.resultsContainer.innerHTML = '';\n    const { search, location } = extractFormData(this.searchForm);\n    fetch(`http://localhost:3000/?search=${search}&location=${location}&country=${this.countryCode}`)\n      .then(response => response.json())\n      .then(({ results }) => {\n        this.stopLoading();\n        return results\n          .map(job => jobTemplate(job, this.currencySymbol))\n          .join('');\n      })\n      .then(jobs => this.resultsContainer.innerHTML = jobs)\n      .catch(() => this.stopLoading());\n    });\n  }\n\n  startLoading() {\n    this.loadingElement.classList.add('loading');\n  }\n\n  stopLoading() {\n    this.loadingElement.classList.remove('loading');\n  }\n}","\nimport { JobSearch } from './JobSearch';\n\nconst jobSearch = new JobSearch('#search-form', '.result-container', '.loading-element');\njobSearch.setCountryCode();\njobSearch.configureFormListener();"]}